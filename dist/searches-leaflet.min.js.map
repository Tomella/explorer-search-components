{"version":3,"sources":["searches-leaflet.min.js","searchmapservice.ts"],"names":["angular","L","module","factory","$timeout","mapService","map","getMap","leafletMap","getDrawer","search","goTo","polygon","xMax","xMin","yMin","yMax","coordinates","forEach","value","position","then","fitBounds"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GCAA,SAAUA,EAA4BC,GACtC,YAEAD,GAAQE,OAAO,6BAEdC,QAAQ,oBAAqB,WAAY,aAAc,SAASC,EAA8BC,GAC9F,GAAIC,GAAW,IAaf,OAJAD,GAAWE,OAAO,SAASC,GAC1BF,EAAME,KAINC,UAAY,SAASC,GACpB,MAAO,OAGRC,KAAM,SAASC,GACd,GAAIC,GAAQ,KACRC,EAAQ,IACRC,EAAQ,IACRC,EAAQ,GAETJ,GAAQK,aACVL,EAAQK,YAAYC,QAAQ,SAAUC,GAClCA,GACFA,EAAMD,QAAQ,SAASE,GAClBA,EAAS,GAAKP,IACjBA,EAAOO,EAAS,IAEbA,EAAS,GAAKN,IACjBA,EAAOM,EAAS,IAEbA,EAAS,GAAKJ,IACjBA,EAAOI,EAAS,IAEbA,EAAS,GAAKL,IACjBA,EAAOK,EAAS,QAOrBf,EAAWE,SAASc,KAAK,SAASf,GACjCA,EAAIgB,YACAP,EAAMD,IACNE,EAAMH,aAOXb,QAASC","file":"searches-leaflet.min.js","sourcesContent":["/***\r\n  * ExplorerSearches - Explorer searches components.\r\n  * @version v0.0.1-SNAPSHOT\r\n  * @link http://www.ga.gov.au/\r\n  * @license Copyright 2015 Geoscience Australia (http://www.ga.gov.au/copyright.html)\r\n  */\r\n  \r\n  !function(e,n){\"use strict\";e.module(\"exp.search.map.service\",[]).factory(\"searchMapService\",[\"$timeout\",\"mapService\",function(e,r){var a,t,o=null,c=\"service/area/lga/\";return r.getMap(function(e){o=e}),{getDrawer:function(e){return null},goTo:function(o){function i(r,o){function i(){u-=.05,0>=u?r.removeLayer(t):(t.setStyle({opacity:u}),a=e(i,1e3))}var u=1;t&&(e.cancel(a),r.removeLayer(t)),t=n.esri.featureLayer({url:c+encodeURIComponent(o),style:{fill:!1,opacity:1}}),r.addLayer(t),a=e(i,5e3)}var u=-1e3,f=1e3,l=1e3,s=1e3;o.coordinates&&o.coordinates.forEach(function(e){e&&e.forEach(function(e){e[0]>u&&(u=e[0]),e[0]<f&&(f=e[0]),e[1]>s&&(s=e[1]),e[1]<l&&(l=e[1])})}),r.getMap().then(function(e){e.fitBounds([[l,f],[s,u]]),i(e,search.name)})}}}])}(angular,L);\n//# sourceMappingURL=searches-leaflet.min.js.map\n","/// <reference path=\"../../../typings/tsd.d.ts\" />\r\n\r\n/*\r\n * Copyright 2015 Geoscience Australia (http://www.ga.gov.au/copyright.html)\r\n */\r\n\r\n\r\n(function(angular: ng.IAngularStatic, L: any) {\r\n'use strict';\r\n\r\nangular.module('exp.search.map.service', [])\r\n\r\n.factory('searchMapService', ['$timeout', 'mapService', function($timeout: ng.ITimeoutService, mapService: any) {\r\n\tvar map: any = null,\r\n\t\tstatesUrl = \"resources/config/states.json\",\r\n\t\tlgasUrl = \"resources/config/lgas.json\",\r\n\t\tlgaShapeUrl = \"service/area/lga/\",\r\n\t\tlgaData = {},\r\n\t\tlgaTimeout: any,\r\n\t\tlgaLayer: any,\r\n\t\tlgaFadeLayer: any;\r\n\t\r\n\tmapService.getMap(function(leafletMap: any) {\r\n\t\tmap = leafletMap;\r\n\t});\t\r\n\t\r\n\treturn {\r\n\t\tgetDrawer : function(search : Searches.ISearchPerformed) {\r\n\t\t\treturn null; //CesiumDrawing.drawingFactory(viewer, search);\r\n\t\t},\r\n\t\t\r\n\t\tgoTo: function(polygon: GeoJSON.Polygon) {\r\n\t\t\tvar xMax  = -1000;\r\n\t\t\tvar xMin  = 1000;\r\n\t\t\tvar yMin  = 1000;\r\n\t\t\tvar yMax  = 1000;\r\n\t\t\t\r\n\t\t\tif(polygon.coordinates) {\r\n\t\t\t\tpolygon.coordinates.forEach(function (value: GeoJSON.Position[]) {\r\n\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\tvalue.forEach(function(position: GeoJSON.Position) {\r\n\t\t\t\t\t\t\tif (position[0] > xMax) {\r\n\t\t\t\t\t\t\t\txMax = position[0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (position[0] < xMin) {\r\n\t\t\t\t\t\t\t\txMin = position[0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (position[1] > yMax) {\r\n\t\t\t\t\t\t\t\tyMax = position[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (position[1] < yMin) {\r\n\t\t\t\t\t\t\t\tyMin = position[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmapService.getMap().then(function(map: any) {\r\n\t\t\t\tmap.fitBounds([\r\n\t\t\t\t   [yMin, xMin], \r\n\t\t\t\t   [yMax, xMax]\r\n\t\t\t\t]);\r\n\t\t\t});\t\t\t\t\r\n\t\t}\r\n\t};\r\n}]);\r\n\r\n})(angular, L);"],"sourceRoot":"/source/"}