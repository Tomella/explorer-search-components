{"version":3,"sources":["searches-leaflet.min.js","implementations/leaflet/searchmapservice.ts","components/templates.ts"],"names":["Drawing","Drawing.DataType","Drawing.GeoJsonUrlHandler","Drawing.GeoJsonUrlHandler.constructor","Drawing.GeoJsonUrlHandler.draw","this","fadeLayer","L","geoJson","response","data","clickable","style","feature","color","opacity","addTo","map","timeout","options","$timeout","fade","Drawing.GeoJsonUrlHandler.erase","Drawing.GeoJsonUrlHandler.destroy","Drawing.GeoJsonUrlHandler.isDrawn","Drawing.GeoJsonPointHandler","Drawing.GeoJsonPointHandler.constructor","Drawing.GeoJsonPointHandler.isDrawn","Drawing.GeoJsonPointHandler.destroy","angular","module","factory","$http","mapService","drawingFactory","search","getMap","then","leafletMap","getDrawer","goTo","polygon","xMax","xMin","yMin","yMax","coordinates","forEach","value","position","fitBounds","run","$templateCache","put"],"mappings":"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","file":"searches-leaflet.min.js","sourceRoot":"/source/","sourcesContent":["/***\r\n  * ExplorerSearches - Explorer searches components.\r\n  * @version v0.0.1-SNAPSHOT\r\n  * @link http://www.ga.gov.au/\r\n  * @license Copyright 2015 Geoscience Australia (http://www.ga.gov.au/copyright.html)\r\n  */\r\nvar Drawing;!function(t){!function(t){t[t.GeoJSONPoint=0]=\"GeoJSONPoint\",t[t.GeoJSONUrl=1]=\"GeoJSONUrl\"}(t.DataType||(t.DataType={}));var e=(t.DataType,function(){function t(t,e,n){this.map=t,this.data=e,this.options=n}return t.prototype.draw=function(){var t=this,e=1,n=function(){e-=.05,0>=e?t.map.removeLayer(t.fadeLayer):(t.fadeLayer.setStyle({opacity:e}),t.timeout=t.options.$timeout(n,1e3))};this.fadeLayer&&(this.options.$timeout.cancel(this.timeout),this.map.removeLayer(this.fadeLayer)),this.options.$http.get(this.data.url).then(function(t){this.fadeLayer=L.geoJson(t.data,{clickable:!1,style:function(t){return{color:\"red\",opacity:1}}}).addTo(this.map),this.timeout=this.options.$timeout(n,5e3)}.bind(this))},t.prototype.erase=function(){this.map&&this.fadeLayer&&(this.map.removeLayer(this.fadeLayer),this.fadeLayer=null)},t.prototype.destroy=function(){this.erase(),this.map=this.data=null},t.prototype.isDrawn=function(){return!this.fadeLayer},t}());t.GeoJsonUrlHandler=e;var n=function(){function t(t,e,n){this.entities=null,this.options={},n&&(this.options=n),this.viewer=t,this.container=e}return t.prototype.draw=function(){},t.prototype.isDrawn=function(){return!1},t.prototype.erase=function(){},t.prototype.destroy=function(){this.erase()},t}();t.GeoJsonPointHandler=n}(Drawing||(Drawing={})),function(t,e){\"use strict\";t.module(\"exp.search.map.service\",[]).factory(\"searchMapService\",[\"$http\",\"$timeout\",\"mapService\",function(t,e,n){function a(n,a){var r={$timeout:e,$http:t};return\"GeoJSONUrl\"==a.type?new Drawing.GeoJsonUrlHandler(n,a,r):\"GeoJSONPoint\"==a.type?new Drawing.GeoJsonPointHandler(n,a,r):void 0}var r=null;return n.getMap().then(function(t){r=t}),{getDrawer:function(t){return a(r,t)},goTo:function(t){var e=-1e3,a=1e3,r=1e3,i=-1e3;t.coordinates&&t.coordinates.forEach(function(t){t&&t.forEach(function(t){t[0]>e&&(e=t[0]),t[0]<a&&(a=t[0]),t[1]>i&&(i=t[1]),t[1]<r&&(r=t[1])})}),n.getMap().then(function(t){t.fitBounds([[r,a],[i,e]])})}}}])}(angular,L),angular.module(\"exp.search.templates\",[]).run([\"$templateCache\",function(t){t.put(\"searches/geosearch/geosearch.html\",'<div class=\"btn-group pull-left radSearch\" style=\"width:27em;opacity:0.9\">\\r\\n\t<div class=\"input-group\">\\r\\n\t\t<input type=\"text\" ng-autocomplete ng-model=\"values.from.description\" options=\\'{country:\"au\"}\\'\\r\\n\t\t\t\t\tsize=\"32\" title=\"Select a locality to pan the map to.\" class=\"form-control\" aria-label=\"...\">\\r\\n\t\t<div class=\"input-group-btn\">\\r\\n\t\t\t<button ng-click=\"zoom(false)\" exp-ga=\"[\\'send\\', \\'event\\', \\'radwaste\\', \\'click\\', \\'zoom to location\\']\"\\r\\n\t\t\t\tclass=\"btn btn-default\"\\r\\n\t\t\t\ttitle=\"Pan and potentially zoom to location.\"><i class=\"fa fa-search\"></i></button>\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n</div>'),t.put(\"searches/basinsearch/basinsearch.html\",'<div class=\"btn-group pull-left radSearch\" style=\"position:relative;width:27em;opacity:0.9\">\\r\\n\t<div class=\"input-group\" style=\"width:100%;\">\\r\\n\t\t<input type=\"text\" size=\"32\" class=\"form-control\" style=\"border-top-right-radius:4px;border-bottom-right-radius:4px;\" \\r\\n\t\t\t\tng-keyup=\"keyup($event)\" ng-focus=\"changing()\" ng-model=\"nameFilter\" placeholder=\"Find a basin of interest\">\\r\\n\t\t<div class=\"input-group-btn\"></div>\\r\\n\t</div>\\r\\n\t<div style=\"width:26em; position:absolute;left:15px\">\t\\r\\n\t\t<div class=\"row\" ng-repeat=\"region in basinData.basins | basinFilterList : nameFilter : 10 | orderBy : \\'name\\'\" \\r\\n\t\t\t\tstyle=\"background-color:white;\">\\r\\n\t\t\t<div class=\"col-md-12 rw-sub-list-trigger\">\\r\\n\t\t\t\t<button class=\"undecorated zoomButton\" ng-click=\"zoomToLocation(region);\">{{region.name}}</button>\\r\\n\t\t\t</div>\t\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n</div>'),t.put(\"searches/lastsearch/lastsearch.html\",'<div style=\"padding:3px;padding-left:10px;position:relative\" ng-class-even=\"\\'even\\'\" ng-class-odd=\"\\'active\\'\">\\r\\n\t<div class=\"pull-left\">\\r\\n\t\t\t<div style=\"font-size:120%;padding-bottom:7px\">Result from: {{data.search.from}}</div>\\r\\n\t\t\t<div ng-if=\"data.search.type == \\'GeoJSONPoint\\'\">\\r\\n\t\t\t\t{{data.search.name}} (Lat {{data.search.data.geometry.coordinates[0] | number : 5}}&#176; Lng  {{data.search.data.geometry.coordinates[1] | number : 5}}&#176;)\\r\\n\t\t\t</div>\\r\\n\t\t\t<div ng-if=\"data.search.type == \\'GeoJSONUrl\\'\">\\r\\n\t\t\t\t{{data.search.name}} \\r\\n\t\t\t</div>\\r\\n\t\t\t<div class=\"pull-right\">\\r\\n\t\t\t\t<button class=\"undecorated\" ng-click=\"dismiss()\">\\r\\n\t\t\t\t\t<i class=\"fa fa-cross\"></i>\\r\\n\t\t\t\t</button>\\r\\n\t\t\t</div>\\r\\n\t</div>\\r\\n\t<div style=\"padding-left:10px\" class=\"pull-right\">\\r\\n\t\t<button class=\"undecorated\" class=\"featureLink\" title=\"Show on map\" \\r\\n\t\t\tng-click=\"toggle()\"><i class=\"fa fa-lg\" ng-class=\"{\\'fa-eye-slash\\':(!data.search.displayed), \\'fa-eye\\':data.search.displayed}\"></i></button>\\r\\n\t\t<button class=\"undecorated\" class=\"featureLink\" title=\"Pan map to region\" \\r\\n\t\t\tng-click=\"pan()\"><i class=\"fa fa-flag fa-lg\"></i></button>\t\t\t\t\t\t\t\\r\\n\t\t<button class=\"undecorated\" class=\"featureLink\" title=\"Clear search/New search\" \\r\\n\t\t\tng-click=\"close()\"><i class=\"fa fa-close fa-lg\"></i></button>\t\t\t\t\t\t\t\\r\\n\t</div>\\r\\n</div>\\r\\n'),t.put(\"searches/lgasearch/lgasearch.html\",'<div class=\"btn-group pull-left radSearch\" style=\"position:relative;width:27em;opacity:0.9\">\\r\\n\t<div class=\"input-group\" style=\"width:100%;\">\\r\\n\t\t<input type=\"text\" size=\"32\" class=\"form-control\" style=\"border-top-right-radius:4px;border-bottom-right-radius:4px;\" \\r\\n\t\t\t\tng-keyup=\"keyup($event)\" ng-focus=\"changing()\" ng-model=\"nameFilter\" placeholder=\"Find a state or local government area\">\\r\\n\t\t<div class=\"input-group-btn\"></div>\\r\\n\t</div>\\r\\n\t<div style=\"width:26em; position:absolute;left:15px\">\t\\r\\n\t\t<div class=\"lgaLists\">\\r\\n\t\t\t<div class=\"row stateList includeMe\" ng-repeat=\"state in lgaData.states | lgaFilterList : nameFilter | orderBy : \\'name\\'\" \\r\\n\t\t\t\t\tstyle=\"background-color:white;\">\\r\\n\t\t\t\t<div class=\"col-md-12 \">\\r\\n\t\t\t\t\t<button class=\"undecorated zoomButton\" ng-click=\"zoomToLocation(state);\">{{state.name}}</button>\\r\\n\t\t\t\t</div>\\r\\n\t\t\t</div>\t\\r\\n\t\t</div>\\r\\n\t\t<div class=\"row\" ng-repeat=\"region in lgaData.lgas | lgaFilterList : nameFilter : 10 | orderBy : \\'name\\'\" \\r\\n\t\t\t\tstyle=\"background-color:white;\">\\r\\n\t\t\t<div class=\"col-md-12 rw-sub-list-trigger\">\\r\\n\t\t\t\t<button class=\"undecorated zoomButton\" ng-click=\"zoomToLocation(region);\">{{region.name}}</button>\\r\\n\t\t\t</div>\t\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n</div>'),t.put(\"searches/searches/searches.html\",'<div class=\"searchesContainer\">\\r\\n\t<div ng-hide=\"data.search\">\\r\\n\t\t<span class=\"searchesItems\" ng-transclude></span>\\r\\n\t\t<span class=\"dropdown clearfix\">\\r\\n\t\t\t<div class=\"btn-group\" role=\"group\">\\r\\n\t\t\t\t<div class=\"btn-group\" role=\"group\">\\r\\n\t\t\t\t\t<button class=\"btn btn-default dropdown-toggle\" type=\"button\" id=\"searchesDropdownMenu3\" \\r\\n\t\t\t\t\t\t\ttooltip=\"Change search type\" tooltip-append-to-body=\"true\"\\r\\n\t\t\t\t\t\t\tdata-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\\r\\n\t\t      \t\t\t<i class=\"fa fa-align-justify\"></i>\\r\\n   \t\t\t\t\t</button>\\r\\n   \t\t\t\t\t<ul class=\"dropdown-menu\" aria-labelledby=\"searchesDropdownMenu3\">\\r\\n\t    \t    \t\t<li ng-repeat=\"search in state.searches\"><button class=\"undecorated\" ng-click=\"switch(search)\" ng-class=\"{searchesStrong:search.active}\">{{search.label}}</button></li>\\r\\n   \t\t\t\t\t</ul>\\r\\n   \t\t\t\t</div>\\r\\n   \t\t\t</div>\\r\\n\t\t</span>\\r\\n\t</div>\\r\\n\t<div class=\"searchesLastSearchContainer\" exp-last-search ng-show=\"data.search\"></div>\\r\\n</div>')}]);\n//# sourceMappingURL=searches-leaflet.min.js.map\n"]}