{"version":3,"sources":["searches-cesium.min.js","implementations/cesium/searchmapservice.ts","components/templates.ts"],"names":["CesiumDrawing","CesiumDrawing.drawingFactory","CesiumDrawing.DataType","CesiumDrawing.GeoJsonDraper","CesiumDrawing.GeoJsonDraper.constructor","CesiumDrawing.GeoJsonDraper.draw","window","alert","error","CesiumDrawing.GeoJsonDraper.erase","CesiumDrawing.GeoJsonDraper.destroy","CesiumDrawing.GeoJsonDraper.isDrawn","CesiumDrawing.MapLabel","CesiumDrawing.MapLabel.constructor","CesiumDrawing.MapLabel.draw","CesiumDrawing.MapLabel.isDrawn","CesiumDrawing.MapLabel.erase","CesiumDrawing.MapLabel.destroy","angular","module","factory","viewerService","viewer","getViewer","then","cesiumViewer","getDrawer","search","drawingFactory","goTo","polygon","xMax","xMin","yMin","yMax","coordinates","forEach","value","position","maxBounds","animate","run","$templateCache","put"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,ACMA,GAAOA,gBAAP,SAAOA,GAQLA,QAAAA,GAA+BA,EAAaA,GAC1CC,GAAIA,GAAiBA,EAAiBA,EAAKA,KAE3CA,OAAIA,IAAQA,EAASA,aACZA,GAAIA,GAASA,EAAQA,EAAMA,MACzBA,GAAQA,EAASA,WACnBA,GAAIA,GAAcA,EAAQA,EAAMA,MAElCA,KAROD,EAAAA,eAAcA,EAW9BA,SAAYA,GAAUE,EAAAA,EAAAA,aAAAA,GAAAA,eAAcA,EAAAA,EAAAA,WAAAA,GAAAA,cAAxBF,EAAAA,WAAAA,EAAAA,aAAZA,IAAYA,GAAAA,EAAAA,SAEZA,EAAAA,WAMEG,QAAAA,GAAYA,EAAYA,EAAWA,GACjCC,KAAKA,MAAQA,EAAOA,MACpBA,KAAKA,KAAOA,EACZA,KAAKA,QAAUA,EAuEnBD,MApEEA,GAAAA,UAAAA,KAAAA,WAAAE,GAAAA,GAAAA,IACEA,MAAKA,oBAAsBA,GAAIA,QAAOA,oBAEtCA,OAAOA,kBAAkBA,KAAKA,KAAKA,KAAKA,KAAKA,KAAKA,SAACA,GAGjDA,IAAKA,GAAIA,GAAEA,EAAGA,EAAIA,EAAWA,SAASA,OAAOA,OAAQA,IAAKA,CACxDA,GACIA,GADAA,EAAcA,EAAWA,SAASA,OAAOA,EAiB3CA,IAdsBA,SAApBA,EAAQA,UACVA,EAAYA,GAAIA,QAAOA,iBACrBA,iBAAmBA,EAAQA,QAAQA,UAAUA,UAItBA,SAArBA,EAAQA,WACVA,EAAYA,GAAIA,QAAOA,iBACrBA,kBACEA,UAAYA,EAAQA,SAASA,UAAUA,WAKxCA,EAALA,CAIAA,GAAIA,GAAwBA,GAAIA,QAAOA,kBACrCA,SAAWA,EACXA,GAAKA,WACLA,YACEA,MAAQA,GAAIA,QAAOA,+BAA+BA,EAAKA,EAAKA,EAAKA,OAIjEA,EAAYA,GAAIA,QAAOA,iBACzBA,iBAAmBA,EACnBA,WAAaA,GAAIA,QAAOA,4BACxBA,aAAcA,EACdA,QAASA,KAIbA,GAAKA,oBAAoBA,IAAIA,IAE/BA,EAAKA,MAAMA,WAAWA,IAAIA,EAAKA,uBAC9BA,UAAUA,SAASA,GAEpBC,OAAOC,MAAMC,MAIjBL,EAAAA,UAAAA,MAAAA,WACMM,KAAKA,OAASA,KAAKA,sBACrBA,KAAKA,MAAMA,WAAWA,OAAOA,KAAKA,qBAClCA,KAAKA,oBAAsBA,OAI/BN,EAAAA,UAAAA,QAAAA,WACEO,KAAKA,QACLA,KAAKA,MAAQA,KAAKA,KAAOA,MAG3BP,EAAAA,UAAAA,QAAAA,WACEQ,OAAQA,KAAKA,qBAEjBR,IAhFaH,GAAAA,cAAaA,CAkF1BA,IAAAA,GAAAA,WAMCY,QAAAA,GAAYA,EAAaA,EAAWA,GAH5BC,KAAAA,SAAgBA,KAChBA,KAAAA,WAGFA,IACHA,KAAKA,QAAUA,GAEhBA,KAAKA,OAASA,EACdA,KAAKA,UAAYA,EAwCpBD,MArCCA,GAAAA,UAAAA,KAAAA,WACEE,GAAIA,GAAcA,KAAKA,UAAUA,KAAKA,SAASA,WAC/CA,MAAKA,QACLA,KAAKA,SAAWA,KAAKA,OAAOA,SAASA,KAClCA,SAAWA,OAAOA,WAAWA,YAAYA,EAAYA,GAAIA,EAAYA,IACrEA,OACEA,UAAYA,EACZA,MAAQA,OAAOA,MAAMA,OACrBA,aAAcA,OAAOA,MAAMA,MAC3BA,aAAcA,GAEhBA,OACEA,KAAOA,KAAKA,UAAUA,KAAKA,WAAWA,KACtCA,KAAOA,iBACPA,UAAYA,OAAOA,MAAMA,MACzBA,aAAeA,OAAOA,MAAMA,MAC5BA,aAAeA,EACfA,iBAAmBA,OAAOA,iBAAiBA,KAC3CA,YAAcA,GAAIA,QAAOA,WAAWA,GAAIA,OAK9CF,EAAAA,UAAAA,QAAAA,WACEG,MAAwBA,OAAjBA,KAAKA,UAGfH,EAAAA,UAAAA,MAAAA,WACII,KAAKA,WACPA,KAAKA,OAAOA,SAASA,OAAOA,KAAKA,UAC9BA,KAAKA,SAAWA,OAIrBJ,EAAAA,UAAAA,QAAAA,WACCK,KAAKA,SAEPL,IAnDaZ,GAAAA,SAAQA,GAvGhBA,gBAAAA,mBA8JP,SAAUkB,GACV,YAEAA,GAAQC,OAAO,6BAEdC,QAAQ,oBAAqB,gBAAiB,SAASC,GACvD,GAAIC,GAAc,IAMlB,OAJCD,GAAcE,YAAYC,KAAK,SAASC,GACxCH,EAASG,KAITC,UAAY,SAASC,GACjB,MAAO3B,eAAc4B,eAAeN,EAAQK,IAGhDE,KAAM,SAASC,GACd,GAAIC,GAAQ,KACRC,EAAQ,IACRC,EAAQ,IACRC,EAAQ,IAETJ,GAAQK,aACVL,EAAQK,YAAYC,QAAQ,SAAUC,GAClCA,GACFA,EAAMD,QAAQ,SAASE,GAClBA,EAAS,GAAKP,IACjBA,EAAOO,EAAS,IAEbA,EAAS,GAAKN,IACjBA,EAAOM,EAAS,IAEbA,EAAS,GAAKJ,IACjBA,EAAOI,EAAS,IAEbA,EAAS,GAAKL,IACjBA,EAAOK,EAAS,QAOrBjB,EAAcQ,MACbU,YACEN,EAAMD,IACNE,EAAMH,IAERS,SAAS,UAMVtB,SCjOHA,QAAQC,OAAO,2BAA4BsB,KAAK,iBAAkB,SAASC,GAAqBA,EAAeC,IAAI,wCAAwC,21BAC3JD,EAAeC,IAAI,oCAAoC,ymBACvDD,EAAeC,IAAI,sCAAsC,w0CACzDD,EAAeC,IAAI,kCAAkC,o+BACrDD,EAAeC,IAAI,oCAAoC","file":"searches-cesium.min.js","sourceRoot":"/source/","sourcesContent":["/***\r\n  * ExplorerSearches - Explorer searches components.\r\n  * @version v0.0.1-SNAPSHOT\r\n  * @link http://www.ga.gov.au/\r\n  * @license Copyright 2015 Geoscience Australia (http://www.ga.gov.au/copyright.html)\r\n  */\r\nvar CesiumDrawing;!function(e){function t(e,t){var a=n[t.type];return a==n.GeoJSONPoint?new r(e,t,null):a==n.GeoJSONUrl?new i(e,t,null):null}e.drawingFactory=t,function(e){e[e.GeoJSONPoint=0]=\"GeoJSONPoint\",e[e.GeoJSONUrl=1]=\"GeoJSONUrl\"}(e.DataType||(e.DataType={}));var n=e.DataType,i=function(){function e(e,t,n){this.scene=e.scene,this.data=t,this.options=n}return e.prototype.draw=function(){var e=this;this.primitiveCollection=new Cesium.PrimitiveCollection,Cesium.GeoJsonDataSource.load(this.data.url).then(function(t){for(var n=0;n<t.entities.values.length;n++){var i,r=t.entities.values[n];if(void 0!==r.polygon&&(i=new Cesium.PolygonGeometry({polygonHierarchy:r.polygon.hierarchy._value})),void 0!==r.polyline&&(i=new Cesium.PolygonGeometry({polygonHierarchy:{positions:r.polyline.positions._value}})),i){var a=new Cesium.GeometryInstance({geometry:i,id:\"instance\",attributes:{color:new Cesium.ColorGeometryInstanceAttribute(0,1,1,.3)}}),o=new Cesium.GroundPrimitive({geometryInstance:a,appearance:new Cesium.PerInstanceColorAppearance({translucent:!1,closed:!0})});e.primitiveCollection.add(o)}}e.scene.primitives.add(e.primitiveCollection)}).otherwise(function(e){window.alert(e)})},e.prototype.erase=function(){this.scene&&this.primitiveCollection&&(this.scene.primitives.remove(this.primitiveCollection),this.primitiveCollection=null)},e.prototype.destroy=function(){this.erase(),this.scene=this.data=null},e.prototype.isDrawn=function(){return!this.primitiveCollection},e}();e.GeoJsonDraper=i;var r=function(){function e(e,t,n){this.entities=null,this.options={},n&&(this.options=n),this.viewer=e,this.container=t}return e.prototype.draw=function(){var e=this.container.data.geometry.coordinates;this.erase(),this.entities=this.viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(e[1],e[0]),point:{pixelSize:4,color:Cesium.Color.YELLOW,outlineColor:Cesium.Color.BLACK,outlineWidth:2},label:{text:this.container.data.properties.name,font:\"16px Helvetica\",fillColor:Cesium.Color.BLACK,outlineColor:Cesium.Color.WHITE,outlineWidth:2,horizontalOrigin:Cesium.HorizontalOrigin.LEFT,pixelOffset:new Cesium.Cartesian2(10,0)}})},e.prototype.isDrawn=function(){return null!=this.entities},e.prototype.erase=function(){this.entities&&(this.viewer.entities.remove(this.entities),this.entities=null)},e.prototype.destroy=function(){this.erase()},e}();e.MapLabel=r}(CesiumDrawing||(CesiumDrawing={})),function(e){\"use strict\";e.module(\"exp.search.map.service\",[]).factory(\"searchMapService\",[\"viewerService\",function(e){var t=null;return e.getViewer().then(function(e){t=e}),{getDrawer:function(e){return CesiumDrawing.drawingFactory(t,e)},goTo:function(t){var n=-1e3,i=1e3,r=1e3,a=-1e3;t.coordinates&&t.coordinates.forEach(function(e){e&&e.forEach(function(e){e[0]>n&&(n=e[0]),e[0]<i&&(i=e[0]),e[1]>a&&(a=e[1]),e[1]<r&&(r=e[1])})}),e.goTo({maxBounds:[[r,i],[a,n]],animate:!0})}}}])}(angular),angular.module(\"exp.search.templates\",[]).run([\"$templateCache\",function(e){e.put(\"searches/basinsearch/basinsearch.html\",'<div class=\"btn-group pull-left radSearch\" style=\"position:relative;width:27em;opacity:0.9\">\\r\\n\t<div class=\"input-group\" style=\"width:100%;\">\\r\\n\t\t<input type=\"text\" size=\"32\" class=\"form-control\" style=\"border-top-right-radius:4px;border-bottom-right-radius:4px;\" \\r\\n\t\t\t\tng-keyup=\"keyup($event)\" ng-focus=\"changing()\" ng-model=\"nameFilter\" placeholder=\"Find a basin of interest\">\\r\\n\t\t<div class=\"input-group-btn\"></div>\\r\\n\t</div>\\r\\n\t<div style=\"width:26em; position:absolute;left:15px\">\t\\r\\n\t\t<div class=\"row\" ng-repeat=\"region in basinData.basins | basinFilterList : nameFilter : 10 | orderBy : \\'name\\'\" \\r\\n\t\t\t\tstyle=\"background-color:white;\">\\r\\n\t\t\t<div class=\"col-md-12 rw-sub-list-trigger\">\\r\\n\t\t\t\t<button class=\"undecorated zoomButton\" ng-click=\"zoomToLocation(region);\">{{region.name}}</button>\\r\\n\t\t\t</div>\t\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n</div>'),e.put(\"searches/geosearch/geosearch.html\",'<div class=\"btn-group pull-left radSearch\" style=\"width:27em;opacity:0.9\">\\r\\n\t<div class=\"input-group\">\\r\\n\t\t<input type=\"text\" ng-autocomplete ng-model=\"values.from.description\" options=\\'{country:\"au\"}\\'\\r\\n\t\t\t\t\tsize=\"32\" title=\"Select a locality to pan the map to.\" class=\"form-control\" aria-label=\"...\">\\r\\n\t\t<div class=\"input-group-btn\">\\r\\n\t\t\t<button ng-click=\"zoom(false)\" exp-ga=\"[\\'send\\', \\'event\\', \\'radwaste\\', \\'click\\', \\'zoom to location\\']\"\\r\\n\t\t\t\tclass=\"btn btn-default\"\\r\\n\t\t\t\ttitle=\"Pan and potentially zoom to location.\"><i class=\"fa fa-search\"></i></button>\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n</div>'),e.put(\"searches/lastsearch/lastsearch.html\",'<div style=\"padding:3px;padding-left:10px;position:relative\" ng-class-even=\"\\'even\\'\" ng-class-odd=\"\\'active\\'\">\\r\\n\t<div class=\"pull-left\">\\r\\n\t\t\t<div style=\"font-size:120%;padding-bottom:7px\">Result from: {{data.search.from}}</div>\\r\\n\t\t\t<div ng-if=\"data.search.type == \\'GeoJSONPoint\\'\">\\r\\n\t\t\t\t{{data.search.name}} (Lat {{data.search.data.geometry.coordinates[0] | number : 5}}&#176; Lng  {{data.search.data.geometry.coordinates[1] | number : 5}}&#176;)\\r\\n\t\t\t</div>\\r\\n\t\t\t<div ng-if=\"data.search.type == \\'GeoJSONUrl\\'\">\\r\\n\t\t\t\t{{data.search.name}} \\r\\n\t\t\t</div>\\r\\n\t\t\t<div class=\"pull-right\">\\r\\n\t\t\t\t<button class=\"undecorated\" ng-click=\"dismiss()\">\\r\\n\t\t\t\t\t<i class=\"fa fa-cross\"></i>\\r\\n\t\t\t\t</button>\\r\\n\t\t\t</div>\\r\\n\t</div>\\r\\n\t<div style=\"padding-left:10px\" class=\"pull-right\">\\r\\n\t\t<button class=\"undecorated\" class=\"featureLink\" title=\"Show on map\" \\r\\n\t\t\tng-click=\"toggle()\"><i class=\"fa fa-lg\" ng-class=\"{\\'fa-eye-slash\\':(!data.search.displayed), \\'fa-eye\\':data.search.displayed}\"></i></button>\\r\\n\t\t<button class=\"undecorated\" class=\"featureLink\" title=\"Pan map to region\" \\r\\n\t\t\tng-click=\"pan()\"><i class=\"fa fa-flag fa-lg\"></i></button>\t\t\t\t\t\t\t\\r\\n\t\t<button class=\"undecorated\" class=\"featureLink\" title=\"Clear search/New search\" \\r\\n\t\t\tng-click=\"close()\"><i class=\"fa fa-close fa-lg\"></i></button>\t\t\t\t\t\t\t\\r\\n\t</div>\\r\\n</div>\\r\\n'),e.put(\"searches/lgasearch/lgasearch.html\",'<div class=\"btn-group pull-left radSearch\" style=\"position:relative;width:27em;opacity:0.9\">\\r\\n\t<div class=\"input-group\" style=\"width:100%;\">\\r\\n\t\t<input type=\"text\" size=\"32\" class=\"form-control\" style=\"border-top-right-radius:4px;border-bottom-right-radius:4px;\" \\r\\n\t\t\t\tng-keyup=\"keyup($event)\" ng-focus=\"changing()\" ng-model=\"nameFilter\" placeholder=\"Find a state or local government area\">\\r\\n\t\t<div class=\"input-group-btn\"></div>\\r\\n\t</div>\\r\\n\t<div style=\"width:26em; position:absolute;left:15px\">\t\\r\\n\t\t<div class=\"lgaLists\">\\r\\n\t\t\t<div class=\"row stateList includeMe\" ng-repeat=\"state in lgaData.states | lgaFilterList : nameFilter | orderBy : \\'name\\'\" \\r\\n\t\t\t\t\tstyle=\"background-color:white;\">\\r\\n\t\t\t\t<div class=\"col-md-12 \">\\r\\n\t\t\t\t\t<button class=\"undecorated zoomButton\" ng-click=\"zoomToLocation(state);\">{{state.name}}</button>\\r\\n\t\t\t\t</div>\\r\\n\t\t\t</div>\t\\r\\n\t\t</div>\\r\\n\t\t<div class=\"row\" ng-repeat=\"region in lgaData.lgas | lgaFilterList : nameFilter : 10 | orderBy : \\'name\\'\" \\r\\n\t\t\t\tstyle=\"background-color:white;\">\\r\\n\t\t\t<div class=\"col-md-12 rw-sub-list-trigger\">\\r\\n\t\t\t\t<button class=\"undecorated zoomButton\" ng-click=\"zoomToLocation(region);\">{{region.name}}</button>\\r\\n\t\t\t</div>\t\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n</div>'),e.put(\"searches/searches/searches.html\",'<div class=\"searchesContainer\">\\r\\n\t<div ng-hide=\"data.search\">\\r\\n\t\t<span class=\"searchesItems\" ng-transclude></span>\\r\\n\t\t<span class=\"dropdown clearfix\">\\r\\n\t\t\t<div class=\"btn-group\" role=\"group\">\\r\\n\t\t\t\t<div class=\"btn-group\" role=\"group\">\\r\\n\t\t\t\t\t<button class=\"btn btn-default dropdown-toggle\" type=\"button\" id=\"searchesDropdownMenu3\" \\r\\n\t\t\t\t\t\t\ttooltip=\"Change search type\" tooltip-append-to-body=\"true\"\\r\\n\t\t\t\t\t\t\tdata-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\\r\\n\t\t      \t\t\t<i class=\"fa fa-align-justify\"></i>\\r\\n   \t\t\t\t\t</button>\\r\\n   \t\t\t\t\t<ul class=\"dropdown-menu\" aria-labelledby=\"searchesDropdownMenu3\">\\r\\n\t    \t    \t\t<li ng-repeat=\"search in state.searches\"><button class=\"undecorated\" ng-click=\"switch(search)\" ng-class=\"{searchesStrong:search.active}\">{{search.label}}</button></li>\\r\\n   \t\t\t\t\t</ul>\\r\\n   \t\t\t\t</div>\\r\\n   \t\t\t</div>\\r\\n\t\t</span>\\r\\n\t</div>\\r\\n\t<div class=\"searchesLastSearchContainer\" exp-last-search ng-show=\"data.search\"></div>\\r\\n</div>')}]);\n//# sourceMappingURL=searches-cesium.min.js.map\n"]}